## Closuer

- 사용자의 코드 안에서 전달되어 사용할 수 있는 로직을 가진 중괄호로 구분된 코드의 블럭
- 일급 객체의 역할
  - 일급객체
    - 전달인자로 보낼 수 있음
    - 변수/상수 등으로 저장하거나 전달할 수 있음
    - 함수의 변환값이 될 수 있음
- 참조타입
- 함수는 클로저의 한 형태로 이름이 있는 클로저
- 클로저 형태
  - 전역 함수는 있지만 아무런 값을 가지지 않는 클로저
  - 중첩 함수는 이름이 있고 내부 함수에서 값을 획득할 수 있는 클로저
  - 클로저 표현식은 둘러싸고 있는 컨텍스트에서 값을 획득하는 가벼운 문법으로 작정된 이름 없는 클로저
- Swift 클로저 표현식은 깨끗하고 명확한 스타일로 최적화되어 간략하고 깔끔한 문법을 가짐
  - 컨텍스트로부터 인자와 반환 값 타입을 유추
  - 단일 표현식 클로저로부터 명확한 반환
  - 축약 인자 이름
  - 후행 클로저 문법

<hr></hr>

### 클로저 표현식

- 인라인 클로저	

  - 간략하고 문법에 초점을 맞추어 작성하는 방법

- 클로저 표현식은 명확성이나 의도를 잃지 않은 축약된 형태로 몇가지 문법 최적화 제공

  - 정렬 함수

    - Swift 표준 라이브러리는 sorted 함수를 제공하며 알려진 타입의 값의 배열을 정렬하여 출력하는 정렬 클로저
    - 정렬과정이 끝나면 정렬 함순은 기존 배열에서 같은 타입과 크기의 새로운 배열을 반환하며 정렬된 순서로 구성

    ```swift
    let names = ["Chris", "Alex", "Ewa", "Barry", "Daniella"]
    
    func backwards(s1: String, s2: String) -> Bool {
      return s1 > s2
    }
    
    var reversed = sorted(names, backwards)
    ```

- 클로저 표현식 문법

  ```swift
  { (parameters) -> return type in
   statements
  }
  ```

  - 클로저 표현식 문법은 상수 인자, 변수 인자, inout 인자 사용 가능
  - 기본값은 주어지지 않음
  - 가변 인자는 명명하고 인자 목록 마지막에 위치시키면 사용할 수 있음
  - 튜플은 인자 타입과 반환 타입으로 쓸 수 있음

- 컨텍스트로부터 유추

  - 정렬 클로저는 함수에 인자로 전달되기 때문에 Swift는 인자의 타입과 정렬 함수의 두번째 인자의 타입으로부터 반환되는 값에서 유추할 수 있음
  - 인자는 타입 `(String, String) -> Bool`의 함수를 예상 `(String, String)`과 Bool 타입은 클로저 표현식 정의 부분에서 작성할 필요가 없음
  - 코드 가독성에 모호함을 피하기 위해 타입을 명시적으로 만들 수 있음

- 단일 표현식 클로저로부터 암시적 반환

  - 단일 표현식 클로자는 클로저 정의에서 return 키워드를 생략한 단일 표현식 결과를 암시적으로 반환 가능

  ```swift
  reversed = sorted(names, { s1, s2 in s1 > s2})
  ```

- 축약 인자 이름

  - Swift는 자동적으로 인라인 클로저에 축약 인자 이름을 부여하는데 클로저 인자의 값은 `$0, $1, $2` 등의 이름으로 참조하여 사용할 수 있음
  - 축약 인자 이름을 mㄹ로저 표현식에 사용할 때 클로저 정의로부터 클로저 인자 목록 생략 가능
  - 축약 인자 이름의 타입과 숫자는 함수 타입으로부터 영향을 받음
  - `in` 키워드는 클로저 표현식이 클로저 내용에 모두 만들어지므로 생략할 수 있음

  ```swift
  reversed = sorted(names, { $0 > $1 })
  ```

- 연산자 함수

  - Swift의 문자열 타입은 문자열에 특화된 크기 비교 연산자와 Bool 타입의 반환 값을 갖는 함수로 정의
  - 더 큰 연산자에 간단하게 넘길 수 있고 Swift는 문자열 전용 구현체를 사용하길 원하는 것을 추론할 수 있음

  ```swift
  reversed = sorted(names, >)
  ```

<hr></hr>

